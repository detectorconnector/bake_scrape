<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Bake Scrape Assistant</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="p-5">
  <div class="container">
    <h1 class="mb-4">Bake Scrape: Sales AI Assistant</h1>

    <form method="post" class="mb-5">
      <div class="mb-3">
        <label for="url" class="form-label">Scrape a Specific Website:</label>
        <input type="url" id="url" name="url" class="form-control" placeholder="https://example.com">
      </div>

      <div class="mb-3">
        <label for="town" class="form-label">Or Scan a Town:</label>
        <input type="text" id="town" name="town" class="form-control" placeholder="Owatonna, MN">
      </div>

      <button type="submit" class="btn btn-primary">Scrape & Analyze</button>
    </form>

    {% if result.scraped %}
      <h3>Scraped Content from {{ result.url }}</h3>
      <pre style="white-space: pre-wrap;">{{ result.scraped }}</pre>
      <h4>Ideas:</h4><p>{{ result.ideas }}</p>
      <h4>Questions:</h4><p>{{ result.questions }}</p>
      <h4>Opener:</h4><p>{{ result.opener }}</p>
      <hr>
    {% endif %}

    {% if result.batch %}
      <h2>Live Batch Results (From Town Input)</h2>
      {% for item in result.batch %}
        <h4>{{ item.url }}</h4>
        <pre>{{ item.scraped }}</pre>
        <p><strong>Ideas:</strong> {{ item.ideas }}</p>
        <p><strong>Questions:</strong> {{ item.questions }}</p>
        <p><strong>Opener:</strong> {{ item.opener }}</p>
        <hr>
      {% endfor %}
    {% endif %}

    {% if result.overnight %}
      <h2>Overnight Batch Report</h2>
      {% for item in result.overnight %}
        <h4>{{ item.url }}</h4>
        <pre>{{ item.scraped }}</pre>
        <p><strong>Ideas:</strong> {{ item.ideas }}</p>
        <p><strong>Questions:</strong> {{ item.questions }}</p>
        <p><strong>Opener:</strong> {{ item.opener }}</p>
        <hr>
      {% endfor %}
    {% endif %}
  </div>
</body>
</html>
